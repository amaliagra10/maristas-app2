<!DOCTYPE html>
<html lang="es">
{% load static %}
<head>
  <meta charset="UTF-8">
  <title>Editar actividad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="{% static 'app_club/linked-selects.js' %}" defer></script>
  <script src="{% static 'mi_app/seleccionador.js' %}" defer></script>
  <script src="{% static 'app_club/checkbok.js' %}" defer></script>
  <link rel="stylesheet" href="{% static 'app_club/css/style_actividad.css' %}">

  
</head>

<body>
  <div class="header">
    <img src="{% static 'img/logo_club.png' %}" alt="Logo EDESTE">
    <h1>Asistencias y Rendimiento</h1>
    <div class="right-info">
      <div><strong>HOCKEY DATA ENTRY</strong></div>
      <div>Usuario: {{ user.username }}</div>
       <div>
            <a href="{% url 'logout' %}" class="logout-link">‚èª</a>
            <a href="{% url 'app_club:areas' %}" class="logout-link">‚Ü©</a>
        </div>
    </div>
  </div>

<div class="page-container">
    <div class="card-full">

        <!-- üîπ BLOQUE DE FILTROS -->
        <div class="card-section">
            <form method="get" class="filter-bar">

            <div class="filter-row">

                <div class="filter-item">
                    <label for="division"><strong>Divisi√≥n:</strong></label>
                    <select name="division" id="division">
                        <option value="">Todas</option>
                        {% for d in divisiones %}
                        <option value="{{ d.id }}" {% if division_seleccionada == d.id|stringformat:"s" %}selected{% endif %}>{{ d.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-item">
                    <label for="rama"><strong>Rama:</strong></label>
                    <select name="rama" id="rama">
                        <option value="">Todas</option>
                        {% for r in ramas %}
                        <option value="{{ r.id }}" {% if rama_seleccionada == r.id|stringformat:"s" %}selected{% endif %}>{{ r.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>

                <button type="submit" class="btn-filter">üîç Filtrar</button>

                {% if request.GET.division or request.GET.rama %}
                <a href="{% url 'app_club:reporte_asistencias' %}" class="btn-clear">‚ùå Limpiar</a>
                {% endif %}
            </div>

            </form>
        </div>

        <!-- üîπ SEPARADOR -->
        <div class="divider"></div>

        <!-- üîπ BLOQUE DE TABLA --> 
        <div class="card-section">        
           {% if mostrar_tabla %}
           <table class="base-table">
            <thead>
                <tr>
                    <th>Jugadora</th>
                    <th>Asistencia Gral.</th>
                    <th>Entrenamientos A.</th>
                    <th>Partidos A.</th>
                    <th>Rendimiento. Gral.</th>
                    <th>Entrenamiento R.</th>
                    <th>Partidos R.</th>
                </tr>
            </thead>

            <tbody>
                {% for row in data %}
                <tr>
                    <td>{{ row.jugadora }}</td>
                    <td>{{ row.pct_general }}%</td>
                    <td>{{ row.tipos.entrenamiento.pct }}%</td>
                    <td>{{ row.tipos.partido.pct }}%</td>
                    <td>{{ row.rend_general }}</td>
                    <td>{{ row.tipos.entrenamiento.rend }}</td>
                    <td>{{ row.tipos.partido.rend }}</td>
                </tr>
                {% endfor %}
            </tbody>
          </table>
         {% else %}   
          <div style="padding:15px; margin:20px 0; background:#F0F4FF; border-left:4px solid #0B3A70; color:#0B3A70; border-radius:5px;">
              Seleccione Divisi√≥n y Rama para ver el reporte de asistencias.
          </div>
        {% endif %}    
        </div>
    </div>
</div>
</body>
</html>

